{% extends "admin/base_site.html" %}
{% load i18n static %}

{% block title %}{% if form.errors %}{% translate "Error:" %} {% endif %}{{ block.super }}{% endblock %}
{% block extrastyle %}{{ block.super }}<link rel="stylesheet" href="{% static "admin/css/login.css" %}">
{{ form.media }}
{% endblock %}

{% block bodyclass %}{{ block.super }} login{% endblock %}

{% block usertools %}{% endblock %}

{% block nav-global %}{% endblock %}

{% block nav-sidebar %}{% endblock %}

{% block content_title %}{% endblock %}

{% block nav-breadcrumbs %}{% endblock %}

{% block content %}
{% if form.errors and not form.non_field_errors %}
<p class="errornote">
{% blocktranslate count counter=form.errors.items|length %}Please correct the error below.{% plural %}Please correct the errors below.{% endblocktranslate %}
</p>
{% endif %}

{% if form.non_field_errors %}
{% for error in form.non_field_errors %}
<p class="errornote">
    {{ error }}
</p>
{% endfor %}
{% endif %}

<div id="content-main">

{% if user.is_authenticated %}
<p class="errornote">
{% blocktranslate trimmed %}
    You are authenticated as {{ username }}, but are not authorized to
    access this page. Would you like to login to a different account?
{% endblocktranslate %}
</p>
{% endif %}

<form action="{{ app_path }}" method="post" id="login-form">{% csrf_token %}
  <div class="submit-row">
    {% if user.is_authenticated %}
      <!-- User authenticated but without the staff member access are redirected by django to this page.
           Therefore we show the logout button so the user can logout and login with another account.
      -->
      <!-- LOGOUT -->
      <a href="{% url 'admin_oauth2_proxy_logout' %}" class="button" style="margin-left: 10px; padding: 10px 15px;">
        Logout
      </a>
    {% else %}
      <!-- This should not happened because the /admin/login page is protected by oauth2-proxy and this one Would
           redirect to the managed login page if the user is not authenticated. This page is only shown for
           authenticated without admin interface access.
      -->
      <!-- OAuth2 Login Button -->
      <a href="{% url 'admin_oauth2_proxy_login' %}" class="button" style="margin-left: 10px; padding: 10px 15px;">
        Login via PP-BGDI OAuth2
      </a>
    {% endif %}
  </div>
</form>

</div>
{% endblock %}
